<template>
  <Page actionBarHidden="true">
    <ScrollView>
      <StackLayout class="page-container">

        <!-- Header -->
        <StackLayout class="header-section">
          <Label :text="$t('navigation.my')" class="section-title" />
        </StackLayout>

        <!-- User Profile -->
        <StackLayout class="profile-section">
          <StackLayout class="avatar-container">
            <Label text="ðŸ‘¤" class="avatar-icon" />
          </StackLayout>
          <Label text="ç”¨æˆ·" class="username" />
          <Label text="æ¬¢è¿Žä½¿ç”¨åº”ç”¨" class="user-subtitle" />
        </StackLayout>

        <!-- Menu Items -->
        <StackLayout class="menu-section">
          <StackLayout class="menu-item" @tap="openHistory">
            <Label text="ðŸ“º è§‚çœ‹åŽ†å²" class="menu-label" />
            <Label text=">" class="menu-arrow" />
          </StackLayout>

          <StackLayout class="menu-item" @tap="openFavorites">
            <Label text="â¤ï¸ æˆ‘çš„æ”¶è—" class="menu-label" />
            <Label text=">" class="menu-arrow" />
          </StackLayout>

          <StackLayout class="menu-item" @tap="openDownloads">
            <Label text="ðŸ“¥ ç¦»çº¿ä¸‹è½½" class="menu-label" />
            <Label text=">" class="menu-arrow" />
          </StackLayout>

          <StackLayout class="menu-item" @tap="openSettings">
            <Label text="âš™ï¸ è®¾ç½®" class="menu-label" />
            <Label text=">" class="menu-arrow" />
          </StackLayout>
        </StackLayout>

        <!-- App Info -->
        <StackLayout class="info-section">
          <Label :text="`ç‰ˆæœ¬ï¼š${appVersion}`" class="version-text" />
          <Label text="Vue 3 + NativeScript" class="tech-text" />
        </StackLayout>

      </StackLayout>
    </ScrollView>
  </Page>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import { UserAnalytics } from '@/services/analytics.service';
import { Dialogs } from '@nativescript/core';

// State
const appVersion = ref('4.0.0');

// Methods
const openHistory = () => {
  UserAnalytics.trackEvent('history_opened');
  Dialogs.alert({
    title: 'è§‚çœ‹åŽ†å²',
    message: 'åŠŸèƒ½å¼€å‘ä¸­...',
    okButtonText: 'ç¡®å®š'
  });
};

const openFavorites = () => {
  UserAnalytics.trackEvent('favorites_opened');
  Dialogs.alert({
    title: 'æˆ‘çš„æ”¶è—',
    message: 'åŠŸèƒ½å¼€å‘ä¸­...',
    okButtonText: 'ç¡®å®š'
  });
};

const openDownloads = () => {
  UserAnalytics.trackEvent('downloads_opened');
  Dialogs.alert({
    title: 'ç¦»çº¿ä¸‹è½½',
    message: 'åŠŸèƒ½å¼€å‘ä¸­...',
    okButtonText: 'ç¡®å®š'
  });
};

const openSettings = () => {
  UserAnalytics.trackEvent('settings_opened');
  Dialogs.alert({
    title: 'è®¾ç½®',
    message: 'åŠŸèƒ½å¼€å‘ä¸­...',
    okButtonText: 'ç¡®å®š'
  });
};

// Lifecycle
onMounted(() => {
  UserAnalytics.trackScreenView('my');
});
</script>